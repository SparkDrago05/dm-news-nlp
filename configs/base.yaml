project:
  name: 'news_improvement'
  random_seed: 42

data:
  raw_dir: 'data/raw'
  processed_dir: 'data/processed'
  interim_dir: 'data/interim'

  # Per-source info (filenames taken from what you shared)
  sources:
    pakistan_today:
      filename: 'pakistan_today(full-data).csv'
      encoding: 'utf-8'
    tribune:
      filename: 'tribune(full-data).csv'
      encoding: 'latin1'
    dawn:
      filename: 'dawn (full-data).csv'
      encoding: 'latin1'
    daily_times:
      filename: 'daily_times(full-data).csv'
      encoding: 'utf-8'
    business_reorder:
      filename: 'business_recorder(2020-2023).csv'
      encoding: 'latin1'

  use_sample: true
  sample:
    per_source: 10000   # max rows per source when building modeling dataset

  large_file:
    business_reorder_chunksize: 20000

categories:
  mapping_file: 'configs/category_mapping_v2.yaml'
  unknown_to: 'Other'
  min_samples_per_class: 1000

preprocessing:
  text_cleaning:
    lower: true
    remove_punctuation: true
    remove_numbers: true
    remove_stopwords: true
    lemmatize: false
  text_columns:
    - 'headline'
    - 'description'
  join_with: ' '

vectorizer:
  type: 'tfidf'         # 'tfidf' or 'bow'
  ngram_range: [ 1, 2 ]
  max_features: 50000

classifier:
  type: 'logreg'        # 'logreg', 'svm', 'nb', 'rf'
  logreg:
    C: 2.0
    class_weight: 'balanced'
  svm:
    C: 1.0
  nb:
    alpha: 1.0
  rf:
    n_estimators: 200
    max_depth: 50

retrieval:
  enabled: true
  top_k: 3
  min_similarity: 0.08
  text_columns:
    - 'headline'
    - 'description'
  join_with: ' '
  vectorizer:
    ngram_range: [ 1, 2 ]
    max_features: 60000
    remove_stopwords: true
  artifacts:
    index_dir: 'data/processed/retrieval_index'
    filename: 'tfidf_retrieval.joblib'

summarizer:
  type: 'bart'          # 'none', 'extractive', 't5', 'bart'
  mode: 'rewrite'
  extractive:
    max_sentences: 3
  t5:
    model_name: 't5-small'
    max_length: 120
    min_length: 40
  bart:
    model_name: 'facebook/bart-large-cnn'
    max_length: 160
    min_length: 60

rewrite:
  type: 'article_expander'
  include_headline: true
  include_context: true
  include_next_steps: true
  include_evidence: true

  lede_sentences: 3
  user_detail_sentences: 6

  # Context extraction from retrieved articles (dataset RAG)
  context_max_sources: 3
  context_sentences_per_source: 2
  context_max_total_sentences: 6
  context_min_sentence_chars: 45

  # Target length of final expanded article
  target_min_words: 220
  target_max_words: 420

  background_prefix: 'Related coverage in our corpus indicates:'

  next_steps_templates:
    Business: 'What to watch: Analysts say next moves may depend on inflation, currency trends, and policy clarity.'
    Pakistan: 'What to watch: Officials are expected to respond as institutions weigh legal, administrative, and governance steps.'
    World: 'What to watch: Diplomatic signals and regional coordination will be key milestones in the coming days.'
    Sports: 'What to watch: Team selection, injury updates, and tactical adjustments ahead of upcoming fixtures.'
    Technology: 'What to watch: Product roadmaps, regulatory signals, and investor sentiment across the sector.'
    Opinion: 'What to watch: Public debate may shift as evidence, expert commentary, and institutional responses emerge.'
    Lifestyle: 'What to watch: Community response, practical adoption, and follow-up initiatives by organisers.'
    Other: 'What to watch: More updates are likely as verified details and official statements become available.'


evaluation:
  test_size: 0.2
  metrics:
    - 'accuracy'
    - 'macro_f1'
  summarization:
    use_rouge: false
    compute_readability: true

artifacts:
  model_dir: 'models'
  classifier_filename: 'news_classifier.joblib'
